import os
import site

def get_models_dir():
    """Get the directory containing the models."""
    # First try the local models directory
    local_models_dir = os.path.join(os.path.dirname(__file__), 'models')
    if os.path.exists(local_models_dir):
        return local_models_dir
    
    # If not found, try the site-packages directory
    site_packages = site.getsitepackages()[0]
    site_models_dir = os.path.join(site_packages, 'face_recognition_models', 'models')
    if os.path.exists(site_models_dir):
        return site_models_dir
    
    # If still not found, create the directory
    os.makedirs(local_models_dir, exist_ok=True)
    return local_models_dir

def pose_predictor_model_location():
    return os.path.join(get_models_dir(), 'shape_predictor_68_face_landmarks.dat')

def pose_predictor_five_point_model_location():
    return os.path.join(get_models_dir(), 'shape_predictor_5_face_landmarks.dat')

def face_recognition_model_location():
    return os.path.join(get_models_dir(), 'dlib_face_recognition_resnet_model_v1.dat')

def cnn_face_detector_model_location():
    return os.path.join(get_models_dir(), 'mmod_human_face_detector.dat') 